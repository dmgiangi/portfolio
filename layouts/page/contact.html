{{ define "main" }}
<article class="post">
    <h1 class="post-title">
        <a href="{{ .Permalink }}">{{ .Title | markdownify }}</a>
    </h1>

    <h2 style="margin-top: 30px; margin-bottom: 0">Reach me out on:</h2>
    <div id="contact-links">
        <a href="https://github.com/dmgiangi" target="_blank">
            <img src="/images/github.svg" alt="GitHub"> GitHub
        </a>
        <a href="https://www.linkedin.com/in/gianluigi-de-marco-890671195/" target="_blank">
            <img src="/images/linked-in.svg" alt="LinkedIn"> LinkedIn
        </a>
    </div>

    <h2 style="margin-top: 30px; margin-bottom: 20px">Or email me</h2>
    <form id="contact-form" style="width: 100%;">
        <div>
            <label for="name" style="display: block;">Name:</label>
            <input required type="text" id="name" name="name" placeholder="Your name">
        </div>

        <div>
            <label for="email">Email:</label>
            <input required type="email" id="email" name="email" placeholder="Your email">
        </div>

        <div>
            <label for="message">Message:</label>
            <textarea required id="message" name="message" placeholder="Your message"></textarea>
        </div>

        <button type="submit">Submit</button>
    </form>

    <div id="form-response"></div>

    <script>
        document.getElementById('contact-form').addEventListener('submit', async function (event) {
            event.preventDefault();

            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                message: document.getElementById('message').value
            };

            const response = await fetch('https://<YOUR_AZURE_FUNCTION_URL>', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(formData)
            });

            const result = await response.json();
            document.getElementById('form-response').innerText = result.message;
        });
    </script>

</article>
{{ end }}
